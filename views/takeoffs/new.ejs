<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/form.css">
<link rel="stylesheet" href="/stylesheets/takeoffs/new.css">
<%- include('../partials/nav') %>

<main>
  <h1><%= title %></h1>
  <form action="/portal/takeoffs" method="POST">
    <table>
      <thead>
        <tr>
          <th colspan="2">Job Information</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="date-input-container">
            <div class="date-input">
              <label>Date:</label>
              <label><%= new Date().toString().substring(0,16) %></label>
            </div>
            <div class="deadline-input">
              <label for="deadline-input">Deadline:</label>
              <input type="date" name="deadline" id="deadline-input">
            </div>
          </td>
          <td>
            <label for="address-input">Address:</label>
            <input type="text" id="address-input" name="address" placeholder="000 Address Street, City, ST 00000" required>
          </td>
        </tr>
        <tr>
          <td>
            <label for="builder-input">Builder:</label>
            <select name="builder" id="builder-input" required>
              <option>-- Select a Builder --</option>
              <% builders.forEach(builder => { %>
                <option value="<%= builder._id %>"><%= builder.name %></option>
              <% }) %>
            </select>
          </td>
          <td>
            <label for="lockbox-code-input">Lockbox Code:</label>
            <input type="text" id="lockbox-code-input" name="lockboxCode" placeholder="0000">
          </td>
        </tr>
      </tbody>
    </table>
    <table>
      <thead>
        <tr>
          <th colspan="3">Locks</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <label for="lock-input">Style:</label>
            <select name="lock" id="lock-input" required>
              <option>-- Select a Lock --</option>
                <% locks.forEach(lock => { %>
                  <option value="<%= lock._id %>"><%= lock.name %></option>
                <% }) %>
            </select>
          </td>
          <td>
            <label for="lock-finish-input">Finish:</label>
            <select name="lockFinish" id="lock-finish-input" required>
                <option>-- Select a Finish --</option>
                <% possibleFinishes.forEach(possibleFinish => { %>
                  <option value="<%= possibleFinish %>"><%= possibleFinish %></option>
                <% }) %>
            </select>
          </td>
          <td>
            <label for="key-number-input">Key Number:</label>
            <input type="text" id="key-number-input" name="keyNumber" placeholder="00000">
          </td>
        </tr>
        <tr>
          <th>
            <label>Type</label>
          </th>
          <th colspan="2">
            <label>Count</label>
          </th>
        </tr>
        <% possibleLockTypes.forEach(possibleLockType => { %>
          <tr>
            <td>
              <label for="<%= possibleLockType.toLowerCase() %>-input"><%= possibleLockType %></label>
            </td>
            <td colspan="2">
              <div class="lock-count-input">
                <div class="operator" onclick="document.getElementById('<%= possibleLockType.toLowerCase() %>-input').value--">-</div>
                <input id="<%= possibleLockType.toLowerCase() %>-input" name="lockCount" type="number" value="0" min="0" required>
                <div class="operator" onclick="document.getElementById('<%= possibleLockType.toLowerCase() %>-input').value++">+</div>
              </div>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
    <div>
      <button type="submit">Create</button>
      <a href="/portal/takeoffs"><button type="button">Cancel</button></a>
    </div>
  </form>
</main>

<%- include('../partials/footer') %>
